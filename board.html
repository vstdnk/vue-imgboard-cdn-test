<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico">
    <!-- –ú–µ—Ç–∞—Ç–µ–≥–∏ –¥–ª—è iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="TG Imgboard">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#2678b6">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-touch-fullscreen" content="yes">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="manifest" href="/manifest.json">
    <title>TG Imgboard - –î–æ—Å–∫–∞</title>

    <!-- –ó–∞–≥—Ä—É–∂–∞–µ–º Telegram WebApp —Å–∫—Ä–∏–ø—Ç –¥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- –ó–∞–≥—Ä—É–∂–∞–µ–º Vue.js -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ -->
    <style>
      :root {
        --tg-theme-bg-color: #ffffff;
        --tg-theme-text-color: #222222;
        --tg-theme-hint-color: #999999;
        --tg-theme-link-color: #2678b6;
        --tg-theme-button-color: #2678b6;
        --tg-theme-button-text-color: #ffffff;
        --tg-theme-secondary-bg-color: #f5f5f5;
        --safe-area-inset-top: env(safe-area-inset-top, 0px);
        --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
      }
      
      html.dark {
        --tg-theme-bg-color: #212121;
        --tg-theme-text-color: #ffffff;
        --tg-theme-hint-color: #aaaaaa;
        --tg-theme-link-color: #8cc2ff;
        --tg-theme-button-color: #2678b6;
        --tg-theme-button-text-color: #ffffff;
        --tg-theme-secondary-bg-color: #292929;
      }
      
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }
      
      html, body {
        height: 100%;
        width: 100%;
        padding: 0;
        margin: 0;
        overflow: hidden;
      }
      
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background-color: var(--tg-theme-bg-color);
        color: var(--tg-theme-text-color);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        overflow: hidden;
        -webkit-text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
      }
      
      #app {
        height: 100%;
        width: 100%;
        overflow-y: auto;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
        position: relative;
        touch-action: pan-y;
      }
      
      #app-loading {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background-color: var(--tg-theme-bg-color);
        color: var(--tg-theme-text-color);
        transition: opacity 0.3s;
        z-index: 9999;
      }
      
      #app-loading.hidden {
        opacity: 0;
        pointer-events: none;
        z-index: -1;
      }
      
      .spinner {
        width: 40px;
        height: 40px;
        margin-bottom: 20px;
        border: 4px solid rgba(0, 0, 0, 0.1);
        border-left-color: var(--tg-theme-button-color);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      
      html.dark .spinner {
        border: 4px solid rgba(255, 255, 255, 0.1);
        border-left-color: var(--tg-theme-link-color);
      }
      
      .loading-text {
        font-size: 14px;
        letter-spacing: 1px;
        font-weight: bold;
      }
      

      
      @keyframes spin {
        to { transform: rotate(360deg); }
      }

      /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç—Ä–µ–¥–æ–≤ */
      .board-container {
        padding: 16px;
        max-width: 1200px;
        margin: 0 auto;
      }

      .board-header {
        display: flex;
        align-items: center;
        gap: 16px;
        margin-bottom: 24px;
        padding: 16px;
        background-color: var(--tg-theme-secondary-bg-color);
        border-radius: 12px;
        border: 1px solid rgba(0,0,0,0.1);
      }

      html.dark .board-header {
        border-color: rgba(255,255,255,0.1);
      }

      .back-button {
        background: none;
        border: none;
        font-size: 24px;
        color: var(--tg-theme-link-color);
        cursor: pointer;
        padding: 8px;
        border-radius: 8px;
        transition: background-color 0.2s ease;
      }

      .back-button:hover {
        background-color: rgba(0,0,0,0.1);
      }

      html.dark .back-button:hover {
        background-color: rgba(255,255,255,0.1);
      }

      .board-info {
        flex: 1;
      }

      .board-id {
        font-family: monospace;
        font-weight: bold;
        color: var(--tg-theme-button-color);
        font-size: 18px;
        margin-bottom: 4px;
      }

      .board-name {
        font-weight: 600;
        font-size: 20px;
        margin-bottom: 8px;
      }

      .board-description {
        font-size: 14px;
        color: var(--tg-theme-hint-color);
        line-height: 1.4;
      }

      .threads-grid {
        display: flex;
        flex-direction: column;
        gap: 12px;
        padding: 16px;
        background-color: var(--tg-theme-secondary-bg-color);
        border-radius: 12px;
        border: 1px solid rgba(0,0,0,0.1);
      }

      html.dark .threads-grid {
        border-color: rgba(255,255,255,0.1);
      }

             .thread-card {
         background-color: var(--tg-theme-bg-color);
         border-radius: 8px;
         padding: 16px;
         transition: all 0.2s ease;
         cursor: pointer;
         user-select: none;
         position: relative;
       }
       
       .thread-content {
         display: flex;
         gap: 16px;
         align-items: flex-start;
       }
       
       .thread-image {
         flex-shrink: 0;
         width: 80px;
         height: 80px;
         border-radius: 6px;
         overflow: hidden;
         background-color: var(--tg-theme-secondary-bg-color);
       }
       
       .thread-image img {
         width: 100%;
         height: 100%;
         object-fit: cover;
         transition: transform 0.2s ease;
       }
       
       .thread-card:hover .thread-image img {
         transform: scale(1.05);
       }
       
       .thread-info {
         flex: 1;
         min-width: 0;
       }

      html.dark .thread-card {
        background-color: var(--tg-theme-secondary-bg-color);
      }

      .thread-card:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        background-color: var(--tg-theme-secondary-bg-color);
      }

      html.dark .thread-card:hover {
        background-color: var(--tg-theme-bg-color);
      }

      /* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –º–µ–∂–¥—É —Ç—Ä–µ–¥–∞–º–∏ */
      .thread-card:not(:last-child)::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 16px;
        right: 16px;
        height: 1px;
        background-color: rgba(0, 0, 0, 0.1);
      }

      html.dark .thread-card:not(:last-child)::after {
        background-color: rgba(255, 255, 255, 0.1);
      }

      .thread-header {
        margin-bottom: 12px;
      }

      .thread-title {
        font-weight: 600;
        font-size: 16px;
        line-height: 1.4;
        margin-bottom: 8px;
      }

      .thread-meta {
        display: flex;
        gap: 16px;
        font-size: 14px;
        color: var(--tg-theme-hint-color);
      }

             .thread-stats {
         display: flex;
         gap: 16px;
         margin-top: 12px;
         padding-top: 12px;
         border-top: 1px solid rgba(0,0,0,0.1);
       }
       
       .thread-views {
         display: flex;
         align-items: center;
         gap: 4px;
         font-size: 14px;
         color: var(--tg-theme-hint-color);
       }

      html.dark .thread-stats {
        border-top-color: rgba(255,255,255,0.1);
      }

      .stat-item {
        display: flex;
        align-items: center;
        gap: 4px;
        font-size: 14px;
        color: var(--tg-theme-hint-color);
      }

      .error-message {
        text-align: center;
        padding: 32px;
        color: var(--tg-theme-hint-color);
      }



      .retry-button {
        background-color: var(--tg-theme-button-color);
        color: var(--tg-theme-button-text-color);
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        margin-top: 16px;
        transition: opacity 0.2s ease;
      }

             .retry-button:hover {
         opacity: 0.8;
       }
       
       .loading-more {
         display: flex;
         align-items: center;
         justify-content: center;
         gap: 12px;
         padding: 20px;
         color: var(--tg-theme-hint-color);
         font-size: 14px;
       }
       
       .spinner.small {
         width: 20px;
         height: 20px;
         border-width: 2px;
       }
       
       .load-more-button {
         display: flex;
         justify-content: center;
         padding: 20px;
       }
       
       .load-more-btn {
         background-color: var(--tg-theme-button-color);
         color: var(--tg-theme-button-text-color);
         border: none;
         padding: 12px 24px;
         border-radius: 8px;
         font-size: 14px;
         cursor: pointer;
         transition: opacity 0.2s ease;
       }
       
       .load-more-btn:hover {
         opacity: 0.8;
       }

      /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
      @media (max-width: 768px) {
        .board-container {
          padding: 12px;
        }
        
        .board-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 12px;
          padding: 12px;
        }
        
        .threads-grid {
          padding: 12px;
        }
        
                 .thread-card {
           padding: 12px;
         }
         
         .thread-content {
           flex-direction: row;
           gap: 12px;
         }
         
         .thread-image {
           width: 60px;
           height: 60px;
         }
        
        .thread-card:not(:last-child)::after {
          left: 12px;
          right: 12px;
        }
        
        .thread-meta {
          flex-direction: column;
          gap: 8px;
        }
        
        .thread-stats {
          flex-direction: column;
          gap: 8px;
        }
      }
    </style>
  </head>
  <body>
    <!-- –ë–∞–∑–æ–≤—ã–π —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="app-loading">
      <div class="spinner"></div>
      <div class="loading-text">THREADS LOADING...</div>
    </div>
    
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è Vue –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <div id="app" style="display: none;"></div>

    <script>
      // –û–ø—Ä–µ–¥–µ–ª—è–µ–º iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
      var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
      
      // –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è Telegram WebApp API
      window.addEventListener('DOMContentLoaded', function() {
        // –≠–ª–µ–º–µ–Ω—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        var appLoading = document.getElementById('app-loading');
        var vueApp = document.getElementById('app');
        var isAppHidden = false;
        
        // –ü–æ–ª—É—á–∞–µ–º ID –¥–æ—Å–∫–∏ –∏–∑ URL
        const urlParams = new URLSearchParams(window.location.search);
        const boardId = urlParams.get('id');
        
        if (!boardId) {
          // –ï—Å–ª–∏ –Ω–µ—Ç ID –¥–æ—Å–∫–∏, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é
          window.location.href = '/';
          return;
        }
        
        // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –¥–ª—è iOS
        if (isIOS) {
          document.body.classList.add('ios');
          
          // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å–∫—Ä–æ–ª–ª–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ü–µ–ª–∏–∫–æ–º –Ω–∞ iOS
          document.addEventListener('touchmove', function(event) {
            if (event.target.closest('#app') || event.target.closest('.board-container')) {
              return;
            }
            event.preventDefault();
          }, { passive: false });
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram API
        var tg = null;
        if (window.Telegram && window.Telegram.WebApp) {
          tg = window.Telegram.WebApp;
          
          // –û—Ç–∫–ª—é—á–∞–µ–º —Å–≤–∞–π–ø –≤–Ω–∏–∑ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
          try {
            if (window.Telegram && window.Telegram.WebApp) {
              var eventData = JSON.stringify({ allow_vertical_swipe: false });
              if (window.TelegramWebviewProxy) {
                window.TelegramWebviewProxy.postEvent('web_app_setup_swipe_behavior', eventData);
              } else {
                window.parent.postMessage(JSON.stringify({
                  eventType: 'web_app_setup_swipe_behavior',
                  eventData: { allow_vertical_swipe: false }
                }), 'https://web.telegram.org');
              }
              console.log('–°–≤–∞–π–ø –≤–Ω–∏–∑ –æ—Ç–∫–ª—é—á–µ–Ω');
            }
          } catch (e) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ —Å–≤–∞–π–ø–∞ –≤–Ω–∏–∑:', e);
          }
          
          // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥" –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
          try {
            if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.BackButton) {
              window.Telegram.WebApp.BackButton.hide();
              console.log('–ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" —Å–∫—Ä—ã—Ç–∞');
            }
          } catch (e) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫—Ä—ã—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥":', e);
          }
          
          // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º–Ω—É—é —Ç–µ–º—É –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
          if (tg.colorScheme === 'dark') {
            document.documentElement.classList.add('dark');
          }
          
          // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö CSS –Ω–∞ –æ—Å–Ω–æ–≤–µ Telegram —Ç–µ–º—ã
          if (tg.themeParams) {
            document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color);
            document.documentElement.style.setProperty('--tg-theme-text-color', tg.themeParams.text_color);
            document.documentElement.style.setProperty('--tg-theme-hint-color', tg.themeParams.hint_color);
            document.documentElement.style.setProperty('--tg-theme-link-color', tg.themeParams.link_color);
            document.documentElement.style.setProperty('--tg-theme-button-color', tg.themeParams.button_color);
            document.documentElement.style.setProperty('--tg-theme-button-text-color', tg.themeParams.button_text_color);
            document.documentElement.style.setProperty('--tg-theme-secondary-bg-color', tg.themeParams.secondary_bg_color);
          }
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Å–∫—Ä—ã—Ç–∏—è —ç–∫—Ä–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        window.hideLoading = function() {
          if (isAppHidden) return;
          isAppHidden = true;
          
          appLoading.classList.add('hidden');
          
          try {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Vue –ø–æ—Å–ª–µ DOMContentLoaded
            const { createApp } = Vue;

            createApp({
                             data() {
                 return {
                   boardId: boardId,
                   boardInfo: null,
                   threads: [],
                   allThreads: [], // –í—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ç—Ä–µ–¥—ã
                   loading: false,
                   error: null,
                   page: 1,
                   threadsPerPage: 20,
                   hasMore: true,
                   loadingMore: false
                 };
               },
              methods: {
                async loadBoardInfo() {
                  try {
                    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ—Å–∫–µ
                    // –ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–≥–ª—É—à–∫—É
                    this.boardInfo = {
                      id: this.boardId,
                      name: this.getBoardName(this.boardId),
                      description: this.getBoardDescription(this.boardId)
                    };
                  } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–æ—Å–∫–µ:', e);
                  }
                },
                
                async loadThreads() {
                  this.loading = true;
                  this.error = null;
                  this.page = 1;
                  
                  try {
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ —Ç—Ä–µ–¥—ã
                    const allThreads = await this.fetchThreads();
                    this.allThreads = allThreads;
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                    this.loadNextPage();
                  } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç—Ä–µ–¥–æ–≤:', e);
                    this.error = '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç—Ä–µ–¥—ã. –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ —Å CORS.';
                  } finally {
                    this.loading = false;
                  }
                },
                
                loadNextPage() {
                  if (!this.hasMore || this.loadingMore) return;
                  
                  this.loadingMore = true;
                  
                  // –ò–º–∏—Ç–∏—Ä—É–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
                  setTimeout(() => {
                    const startIndex = (this.page - 1) * this.threadsPerPage;
                    const endIndex = startIndex + this.threadsPerPage;
                    const newThreads = this.allThreads.slice(startIndex, endIndex);
                    
                    this.threads.push(...newThreads);
                    this.page++;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –µ—â–µ —Ç—Ä–µ–¥—ã
                    this.hasMore = endIndex < this.allThreads.length;
                    this.loadingMore = false;
                  }, 300);
                },
                
                onScroll() {
                  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç–∏–≥–ª–∏ –ª–∏ –∫–æ–Ω—Ü–∞ —Å–ø–∏—Å–∫–∞
                  const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
                  const scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;
                  const clientHeight = document.documentElement.clientHeight || window.innerHeight;
                  
                  if (scrollTop + clientHeight >= scrollHeight - 100) {
                    this.loadNextPage();
                  }
                },
                
                async fetchThreads() {
                  // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ codetabs –ø—Ä–æ–∫—Å–∏ –¥–ª—è –æ–±—Ö–æ–¥–∞ CORS
                  const proxyUrl = `https://api.codetabs.com/v1/proxy?quest=https://2ch.hk/${this.boardId}/catalog.json`;
                  
                  try {
                    console.log('–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ codetabs –ø—Ä–æ–∫—Å–∏...');
                    const response = await fetch(proxyUrl, {
                      method: 'GET',
                      headers: {
                        'Accept': 'application/json'
                      }
                    });
                    
                    if (response.ok) {
                      const data = await response.json();
                      console.log('–î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã —á–µ—Ä–µ–∑ codetabs:', data);
                      return this.parseThreads(data);
                    } else {
                      throw new Error(`HTTP ${response.status}`);
                    }
                  } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ codetabs:', e);
                    throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ codetabs –ø—Ä–æ–∫—Å–∏');
                  }
                },
                

                
                parseThreads(data) {
                  // –ü–∞—Ä—Å–∏–º –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞
                  if (data.threads && Array.isArray(data.threads)) {
                    return data.threads.map(thread => ({
                      id: thread.num || thread.id,
                      title: thread.subject || thread.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è',
                      posts: thread.posts_count || thread.posts || 0,
                      views: thread.views || 0,
                      timestamp: thread.timestamp || thread.date * 1000 || Date.now(),
                      lastPost: thread.last_post || null,
                      image: this.getThreadImage(thread)
                    }));
                  }
                  
                  if (data.catalog && Array.isArray(data.catalog)) {
                    return data.catalog.map(thread => ({
                      id: thread.num || thread.id,
                      title: thread.subject || thread.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è',
                      posts: thread.posts_count || thread.posts || 0,
                      views: thread.views || 0,
                      timestamp: thread.timestamp || thread.date * 1000 || Date.now(),
                      lastPost: thread.last_post || null,
                      image: this.getThreadImage(thread)
                    }));
                  }
                  
                  return [];
                },
                
                getThreadImage(thread) {
                  // –ò—â–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –≤ —Ç—Ä–µ–¥–µ
                  if (thread.files && thread.files.length > 0) {
                    const file = thread.files[0];
                    if (file.thumbnail) {
                      return `https://2ch.hk${file.thumbnail}`;
                    } else if (file.path) {
                      return `https://2ch.hk${file.path}`;
                    }
                  }
                  
                  // –ï—Å–ª–∏ –Ω–µ—Ç —Ñ–∞–π–ª–æ–≤, –∏—â–µ–º –≤ –ø–æ—Å—Ç–∞—Ö
                  if (thread.posts && thread.posts.length > 0) {
                    for (const post of thread.posts) {
                      if (post.files && post.files.length > 0) {
                        const file = post.files[0];
                        if (file.thumbnail) {
                          return `https://2ch.hk${file.thumbnail}`;
                        } else if (file.path) {
                          return `https://2ch.hk${file.path}`;
                        }
                      }
                    }
                  }
                  
                  return null;
                },
                
                
                
                getBoardName(boardId) {
                  const boardNames = {
                    'a': '–ê–Ω–∏–º–µ',
                    'b': '–ë—Ä–µ–¥',
                    'bi': '–í–µ–ª–æ—Å–∏–ø–µ–¥—ã',
                    'biz': '–ë–∏–∑–Ω–µ—Å',
                    'bo': '–ö–Ω–∏–≥–∏',
                    'c': '–ö–æ–º–∏–∫—Å—ã –∏ –º—É–ª—å—Ç—Ñ–∏–ª—å–º—ã',
                    'dev': '–¢—è–Ω–∞—á',
                    'em': '–î—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã',
                    'ew': '–ö–æ–Ω–µ—Ü —Å–≤–µ—Ç–∞',
                    'fa': '–ú–æ–¥–∞ –∏ —Å—Ç–∏–ª—å',
                    'fiz': '–§–∏–∑–∫—É–ª—å—Ç—É—Ä–∞',
                    'fl': '–ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏',
                    'ftb': '–§—É—Ç–±–æ–ª',
                    'hh': 'Hip-Hop',
                    'hi': '–ò—Å—Ç–æ—Ä–∏—è',
                    'hw': '–ñ–µ–ª–µ–∑–æ –∏ –¢–µ—Ö–Ω–∏–∫–∞',
                    'me': '–ú–µ–¥–∏—Ü–∏–Ω–∞',
                    'mg': '–ú–∞–≥–∏—è',
                    'mlp': 'My Little Pony',
                    'mo': '–ú–æ—Ç–æ—Ü–∏–∫–ª—ã',
                    'ne': '–ñ–∏–≤–æ—Ç–Ω—ã–µ –∏ –ø—Ä–∏—Ä–æ–¥–∞',
                    'pvc': '–§–∏–≥—É—Ä–∫–∏',
                    'ph': '–§–∏–ª–æ—Å–æ—Ñ–∏—è',
                    'po': '–ü–æ–ª–∏—Ç–∏–∫–∞',
                    'pr': '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ',
                    'psy': '–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è –∏ –ø—Å–∏—Ö–∏–∞—Ç—Ä–∏—è',
                    'ra': '–†–∞–¥–∏–æ—Ç–µ—Ö–Ω–∏–∫–∞',
                    're': '–†–µ–ª–∏–≥–∏—è',
                    's': '–ü—Ä–æ–≥—Ä–∞–º–º—ã',
                    'sf': '–ù–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞',
                    'sci': '–ù–∞—É–∫–∞',
                    'sn': '–ü–∞—Ä–∞–Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ —è–≤–ª–µ–Ω–∏—è',
                    'sp': '–°–ø–æ—Ä—Ç',
                    'spc': '–ö–æ—Å–º–æ—Å –∏ –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—è',
                    't': '–¢–µ—Ö–Ω–∏–∫–∞',
                    'tr': '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –∏ –∞–≤–∏–∞—Ü–∏—è',
                    'tv': '–°–µ—Ä–∏–∞–ª—ã',
                    'un': '–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ',
                    'w': '–û—Ä—É–∂–∏–µ',
                    'wh': 'Warhammer',
                    'wm': '–í–æ–µ–Ω–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞',
                    'di': '–°—Ç–æ–ª–æ–≤–∞—è',
                    'de': '–î–∏–∑–∞–π–Ω',
                    'diy': '–•–æ–±–±–∏',
                    'dom': '–î–æ–º–æ—Å—Ç—Ä–æ–π',
                    'izd': '–ì—Ä–∞—Ñ–æ–º–∞–Ω–∏—è',
                    'mus': '–ú—É–∑—ã–∫–∞–Ω—Ç—ã',
                    'pa': '–ñ–∏–≤–æ–ø–∏—Å—å',
                    'p': '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è',
                    'wp': '–û–±–æ–∏ –∏ –≤—ã—Å–æ–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ',
                    'td': '–¢—Ä—ë—Ö–º–µ—Ä–Ω–∞—è –≥—Ä–∞—Ñ–∏–∫–∞',
                    'bg': '–ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã',
                    'cg': '–ö–æ–Ω—Å–æ–ª–∏',
                    'mc': 'Minecraft',
                    'mmo': 'Massive multiplayer online games',
                    'tes': 'The Elder Scrolls',
                    'vg': 'Video Games General',
                    'wr': '–¢–µ–∫—Å—Ç–æ–≤—ã–µ –∞–≤—Ç–æ—Ä—Å–∫–∏–µ —Ä–ø–≥',
                    'aa': '–ê–Ω–∏–º–µ –∞—Ä—Ç',
                    'fd': '–§—ç–Ω–¥–æ–º',
                    'ja': '–Ø–ø–æ–Ω—Å–∫–∞—è –∫—É–ª—å—Ç—É—Ä–∞',
                    'ma': '–ú–∞–Ω–≥–∞',
                    'rm': 'Rozen Maiden',
                    'to': 'Touhou',
                    'vn': '–í–∏–∑—É–∞–ª—å–Ω—ã–µ –Ω–æ–≤–µ–ª–ª—ã',
                    'd': '–°–∫–ª–∞/d/ –≥—Ä—è–∑–∏',
                    'fag': '–§–∞–≥–≥–æ—Ç—Ä–∏—è',
                    'soc': '–û–±—â–µ–Ω–∏–µ',
                    'r': '–ü—Ä–æ—Å—å–±—ã',
                    'fg': '–¢—Ä–∞–ø—ã',
                    'fur': '–§—É—Ä—Ä–∏',
                    'gg': '–•–æ—Ä–æ—à–∏–µ –¥–µ–≤—É—à–∫–∏',
                    'ga': '–ì–µ–∏',
                    'h': '–•–µ–Ω—Ç–∞–π',
                    'ho': '–ü—Ä–æ—á–∏–π —Ö–µ–Ω—Ç–∞–π',
                    'web': 'Web-–º–∞—Å—Ç–µ—Ä–∞',
                    'gd': 'Gamedev',
                    'mov': '–§–∏–ª—å–º—ã',
                    'rf': '–£–±–µ–∂–∏—â–µ',
                    'br': '–ë–∞—Ä–∞—Ö–æ–ª–∫–∞',
                    'wrk': '–†–∞–±–æ—Ç–∞ –∏ –∫–∞—Ä—å–µ—Ä–∞',
                    'mu': '–ú—É–∑—ã–∫–∞',
                    'trv': '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –∏ –æ—Ç–¥—ã—Ö',
                    'au': '–ê–≤—Ç–æ–º–æ–±–∏–ª–∏',
                    'gb': '–ê–∑–∞—Ä—Ç–Ω—ã–µ –∏–≥—Ä—ã',
                    'asylum': '–£–±–µ–∂–∏—â–µ',
                    'fs': '–§—ç–Ω—Ç–µ–∑–∏',
                    'fet': '–§–µ—Ç–∏—à',
                    'e': 'Extreme Pron',
                    'hc': 'Hardcore',
                    'moba': 'Multiplayer Online Battle Arena games',
                    'mobi': '–ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è',
                    'abu': 'abu',
                    'cul': '–ö—É–ª—å—Ç—É—Ä–∞',
                    'out': '–ê–∫—Ç–∏–≤–Ω—ã–π –æ—Ç–¥—ã—Ö',
                    'old': '–û–ª–¥—Ñ–∞–≥–∏',
                    'cc': '–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞',
                    'media': '–ê–Ω–∏–º–∞—Ü–∏—è',
                    'zog': '–¢–µ–æ—Ä–∏–∏ –∑–∞–≥–æ–≤–æ—Ä–∞',
                    'ussr': '–°–°–°–†',
                    'jsf': 'Japanese Street Fashion',
                    'ukr': '/Ukr/aine ‚Äî –£–∫—Ä–∞—ó–Ω–∞',
                    'sw': 'Star Wars',
                    'law': '–ü—Ä–∞–≤–æ –∏ –ø—Ä–∞–≤–æ–ø—Ä–∏–º–µ–Ω–∏—Ç–µ–ª–∏',
                    'm': '–ú–µ—Ö–∞',
                    'ya': '–Ø–æ–π',
                    'r34': '–ü—Ä–∞–≤–∏–ª–æ 34',
                    'qtr4': 'qtr4',
                    'wow': 'World of Warcraft'
                  };
                  return boardNames[boardId] || `–î–æ—Å–∫–∞ /${boardId}/`;
                },
                
                getBoardDescription(boardId) {
                  const descriptions = {
                    'a': '–∞–Ω–∏–º–µ, 2d, –≤–∞–π—Ñ—É',
                    'b': '–±—Ä–µ–¥',
                    'bi': '–≤–µ–ª–æ—Å–∏–ø–µ–¥—ã, dmx',
                    'biz': '–±–∏–∑–Ω–µ—Å, —Å–∏—Ä–∏—É–∑ –±–∏–∑–Ω–µ—Å',
                    'bo': '–∫–Ω–∏–≥–∏, —á—Ç–µ–Ω–∏–µ',
                    'c': '–∫–æ–º–∏–∫—Å—ã, –º—É–ª—å—Ç—Ñ–∏–ª—å–º—ã',
                    'dev': '—Ç—è–Ω–∞—á',
                    'em': '—ç–º–∏–≥—Ä–∞—Ü–∏—è, —Å—Ç—Ä–∞–Ω—ã',
                    'ew': '–∫–æ–Ω–µ—Ü —Å–≤–µ—Ç–∞',
                    'fa': '–º–æ–¥–∞, —Å—Ç–∏–ª—å, —à–º–æ—Ç–∫–∏, —Å—Ç—Ä–∏–∂–∫–∏, –ø–∞—Ä—Ç–∞–∫–∏, —Ä—é–∫–∑–∞–∫–∏, –ø–∞—Ä—Ñ—é–º, –ø–∞—Ç–ª—ã',
                    'fiz': '—Ñ–∏–∑–∫—É–ª—å—Ç—É—Ä–∞, –∑–¥–æ—Ä–æ–≤—å–µ, —Å–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å, –Ω–∞–±—Ä–∞—Ç—å –≤–µ—Å, –±–∏—Ü—É—Ö–∞',
                    'fl': '–∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏, –º—É–Ω—Å–ø–∏–∫, —ç–ª—å—Ñ–∏–π—Å–∫–∏–π',
                    'ftb': '—Ñ—É—Ç–±–æ–ª, –ø—Ä–µ–º—å–µ—Ä –ª–∏–≥–∞, –Ω–æ–≥–æ–º—è—á',
                    'hh': '—Ö–∏–ø—Ö–æ–ø, —Ä—ç–ø, –æ–ª–¥—Å–∫—É–ª',
                    'hi': '–∏—Å—Ç–æ—Ä–∏—è',
                    'hw': '–∂–µ–ª–µ–∑–æ, –≤–∏–¥–µ–æ–∫–∞—Ä—Ç—ã, –Ω–æ—É—Ç–±—É–∫–∏, intel, amd, nvidia, ati',
                    'me': '–º–µ–¥–∏—Ü–∏–Ω–∞, –∑–¥–æ—Ä–æ–≤—å–µ, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, —Å—Ö–æ–¥–∏ –∫ –≤—Ä–∞—á—É',
                    'mg': '–º–∞–≥–∏—è, –∞—Å—Ç—Ä–∞–ª, –≤—É–¥—É, —Ä—É–Ω—ã, –ø—Å–∏–æ–Ω–∏–∫–∞, —Å—É–∫–∫—É–±—ã',
                    'mlp': '–ú–æ–∏ –º–∞–ª–µ–Ω—å–∫–∏–µ –ø–æ–Ω–∏, –¥—Ä—É–∂–±–∞, –º–∞–≥–∏—è',
                    'mo': '–ú–æ—Ç–æ—Ü–∏–∫–ª—ã, —Å–∫—É—Ç–µ—Ä—ã, —Ç—Ä–∞–π–∫–∏, —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞',
                    'ne': '–∂–∏–≤–æ—Ç–Ω—ã–µ –∏ –ø—Ä–∏—Ä–æ–¥–∞',
                    'pvc': '—Ñ–∏–≥—É—Ä–∫–∏',
                    'ph': '—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è',
                    'po': '–ø–æ–ª–∏—Ç–∏–∫–∞, –Ω–æ–≤–æ—Å—Ç–∏, –æ–ª—å–≥–∏–Ω—Ü—ã, —Ö–æ—Ö–ª—ã, –ª–∏–±–µ—Ä–∞—Ö–∏, —Ä–µ–ø—Ç–∏–ª–æ–∏–¥—ã.. oh shi',
                    'pr': '–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ, –±—ã–¥–ª–æ–∫–æ–¥–∏–Ω–≥',
                    'psy': '–ø—Å–∏—Ö–æ–ª–æ–≥–∏—è, –ø—Å–∏—Ö–∏–∞—Ç—Ä–∏—è',
                    'ra': '—Ä–∞–¥–∏–æ–ª—é–±–∏—Ç–µ–ª–∏, —Å–≤—è–∑—å, —Ä–∞–¥–∏–æ—Ç–µ—Ö–Ω–∏–∫–∞',
                    're': '—Ä–µ–ª–∏–≥–∏—è, —Ä–µ–ª–∏–≥–∏–æ–∑–Ω–∞—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è',
                    's': 'linux, windows, —à–∏–Ω–¥–æ–≤—Å, –ø—Ä–æ–≥—Ä–∞–º–º—ã',
                    'sf': '–Ω–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞, science fiction, sci-fi',
                    'sci': '–Ω–∞—É–∫–∞',
                    'sn': '–∫—Ä–∏–ø–∏, –ø–∞—Ä–∞–Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ —è–≤–ª–µ–Ω–∏—è',
                    'sp': '—Å–ø–æ—Ä—Ç, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä—ã, —Ñ—É—Ç–±–æ–ª –≤ /ftb/',
                    'spc': '–∫–æ—Å–º–æ—Å, –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—è, –≤—Å–µ–ª–µ–Ω–Ω—ã–µ, –∑–≤–µ–∑–¥—ã, –æ–≥—É—Ä—Ü—ã',
                    't': '—Ç–µ—Ö–Ω–∏–∫–∞, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è',
                    'tr': '—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –∏ –∞–≤–∏–∞—Ü–∏—è',
                    'tv': '—Å–µ—Ä–∏–∞–ª—ã –¥–ª—è –¥–æ–º–æ—Ö–æ–∑—è–µ–∫',
                    'un': '–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –≤—É–∑, —à–∫–æ–ª–∞, –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ, –≥–∏–∞, –µ–≥—ç, —É–∂–µ –Ω–µ —à–∫–æ–ª—å–Ω–∏–∫',
                    'w': '–æ—Ä—É–∂–∏–µ, –Ω–æ–∂–∏, —Å—Ç–≤–æ–ª—ã',
                    'wh': '–≤–∞—Ä—Ö–∞–º–º–µ—Ä –§–ë, –≤–∞—Ä—Ö–∞–º–º–µ—Ä 4000',
                    'wm': '–≤–æ–µ–Ω–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞, –∞—Ä–º–∏–∏, –≤–æ–æ—Ä—É–∂–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã',
                    'di': '–µ–¥–∞, —Ö—Ä—é—á–µ–≤–æ, —Å—Ç–æ–ª–æ–≤–∞—è, —Ä–µ—Ü–µ–ø—Ç—ã',
                    'de': '–¥–∏–∑–∞–π–Ω',
                    'diy': '—Ö–æ–±–±–∏, –ª–µ–≥–æ, –∫–ª–µ–∏—Ç—å —Ç–∞–Ω—á–∏–∫–∏, –≤—ã—à–∏–≤–∞–Ω–∏–µ',
                    'dom': '–¥–æ–º–æ—Å—Ç—Ä–æ–π',
                    'izd': '–≥—Ä–∞—Ñ–æ–º–∞–Ω–∏—è, –ø–∞—Å—Ç—ã, —Ä–∞—Å—Å–∫–∞–∑—ã, —Ä–æ–º–∞–Ω—ã',
                    'mus': '–º—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –≤–æ–∫–∞–ª, DAW, –∑–≤—É–∫–æ–∑–∞–ø–∏—Å—å, –¥–∏–¥–∂–µ–∏, –¥–∏–∫—Ç–æ—Ä—ã',
                    'pa': '–∂–∏–≤–æ–ø–∏—Å—å, —Ä–∏—Å—É–Ω–∫–∏, —Ö—É–¥–æ–∂–Ω–∏–∫–∏',
                    'p': '—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è, —Ñ–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–∞, –æ–±—ä–µ–∫—Ç–∏–≤—ã, canon, nikon, sony, pentax',
                    'wp': '–æ–±–æ–∏ –∏ –≤—ã—Å–æ–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ',
                    'td': '—Ç—Ä—ë—Ö–º–µ—Ä–Ω–∞—è –≥—Ä–∞—Ñ–∏–∫–∞',
                    'bg': '–Ω–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã',
                    'cg': '–∫–æ–Ω—Å–æ–ª–∏, playstation, xbox, nintendo',
                    'mc': '–º–∞–π–Ω–∫—Ä–∞—Ñ—Ç, —Å–µ—Ä–≤–µ—Ä–∞',
                    'mmo': 'multiplayer games, mmo, wow, wot, eve, lineage',
                    'tes': 'TES, elder scrolls, morrowind, skyrim, oblivion, fusrodah',
                    'vg': '–í–∏–¥–µ–æ–∏–≥—Ä—ã, general, –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–¥—ã',
                    'wr': '—Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ä–ø–≥',
                    'aa': '–∞–Ω–∏–º–µ –∞—Ä—Ç',
                    'fd': '—Ñ—ç–Ω–¥–æ–º, –∫–æ—Å–ø–ª–µ–π, —è–ø–æ–Ω—Å–∫–∞—è –∫—É–ª—å—Ç—É—Ä–∞, –∞–Ω–∏–º–µ',
                    'ja': '—è–ø–æ–Ω—Å–∫–∞—è –∫—É–ª—å—Ç—É—Ä–∞',
                    'ma': '–º–∞–Ω–≥–∞, –Ω–∞—Ä—É—Ç–æ, –±–ª–∏—á, —è–ø–æ–Ω—Å–∫–∏–µ –∫–æ–º–∏–∫—Å—ã',
                    'rm': 'rozen maiden',
                    'to': 'touhou',
                    'vn': '–≤–∏–∑—É–∞–ª—å–Ω—ã–µ –Ω–æ–≤–µ–ª–ª—ã',
                    'd': '–¥–≤–∞—á, –º–æ–¥–µ—Ä–∞—Ü–∏—è, —Ä–∞–∑–±–∞–Ω—å, –∑–∞–±–∞–Ω—å, —É–±–µ—Ä–∏, –≤–µ—Ä–Ω–∏, –∑–¥–µ–ª–∞–π',
                    'fag': '—Ñ–∞–≥–≥–æ—Ç—Ä–∏—è, –±–æ–≥–∏–Ω–∏',
                    'soc': '—Å—Ö–æ–¥–∫–∏, –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞, –¥–µ–∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏—è',
                    'r': '—Ä–µ–∫–≤–µ—Å—Ç—ã, –∏—â—É –ø–∏–∫—á—É, –≤–µ–±–º–∫—É, –ø–∞—Å—Ç—É',
                    'fg': '—Ç—Ä–∞–ø—ã',
                    'fur': '—Ñ—É—Ä—Ä–∏',
                    'gg': '—Ö–æ—Ä–æ—à–∏–µ –¥–µ–≤—É—à–∫–∏',
                    'ga': '–≥–µ–∏',
                    'h': '—Ö–µ–Ω—Ç–∞–π',
                    'ho': '–ø—Ä–æ—á–∏–π —Ö–µ–Ω—Ç–∞–π',
                    'web': '–≤–µ–±–º–∞—Å—Ç–µ—Ä–∞, seo, —Ä–µ–∫–ª–∞–º–∞, –ø–∏–∞—Ä',
                    'gd': 'gamedev, –∏–≥—Ä–æ—Å—Ç—Ä–æ–π, —ç–ª—å—Ñ—ã –Ω–∞–±–µ–≥–∞—é—Ç',
                    'mov': '—Ñ–∏–ª—å–º—ã, –∫–∏–Ω–æ, –Ω–æ–≤–∏–Ω–∫–∏, —Å–µ—Ä–∏–∞–ª—ã –≤ /tv/',
                    'rf': '—É–±–µ–∂–∏—â–µ, —Å–æ—Ü–∏–æ—Ñ–æ–±–∏—è',
                    'br': '–±–∞—Ä–∞—Ö–æ–ª–∫–∞',
                    'wrk': '—Ä–∞–±–æ—Ç–∞, –∫–∞—Ä—å–µ—Ä–∞, –æ—Ñ–∏—Å, –º–∞–∫–¥–æ–Ω–∞–ª—å–¥—Å',
                    'mu': '–º—É–∑—ã–∫–∞, –∏–ª–∏—Ç–∞',
                    'trv': '–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –∏ –æ—Ç–¥—ã—Ö',
                    'au': '–∞–≤—Ç–æ–º–æ–±–∏–ª–∏, —Å–µ–º–µ–π–Ω—ã–µ –±–∏–æ–ø—Ä–æ–±–ª–µ–º—ã, —à–∫–≤–æ—Ä–Ω–∏, –ø–∞—Ç—Ä–∏–æ—Ç, —Å–ª–æ–º–∞–ª–∞—Å—å –¥—Å–≥, —Ç–∞–∑–æ–ø—Ä–æ–±–ª–µ–º—ã',
                    'gb': '–∞–∑–∞—Ä—Ç–Ω—ã–µ –∏–≥—Ä—ã',
                    'asylum': '—É–±–µ–∂–∏—â–µ',
                    'fs': '—Ñ—ç–Ω—Ç–µ–∑–∏',
                    'fet': '—Ñ–µ—Ç–∏—à',
                    'e': 'extreme pron',
                    'hc': 'hardcore',
                    'moba': 'dota, lol, hots, moba',
                    'mobi': '–º–æ–±–∏–ª—å–Ω—ã–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, iphone, android, winphone, 2ch browser',
                    'abu': 'abu',
                    'cul': '–∫—É–ª—å—Ç—É—Ä–∞',
                    'out': '–∞–∫—Ç–∏–≤–Ω—ã–π –æ—Ç–¥—ã—Ö',
                    'old': '–æ–ª–¥—Ñ–∞–≥–∏',
                    'cc': '–∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞',
                    'media': 'webm, gif, youtube, –º–µ–¥–∏–∞',
                    'zog': '–Ω–µ —Å—Ç–æ–∏—Ç –≤—Å–∫—Ä—ã–≤–∞—Ç—å —ç—Ç—É —Ç–µ–º—É',
                    'ussr': '–°–°–°–†',
                    'jsf': 'japanese street fashion',
                    'ukr': '—É–∫—Ä–∞–∏–Ω–∞, —á–µ —Ç–∞–º —É —Ö–æ—Ö–ª–æ–≤',
                    'sw': 'star wars',
                    'law': '–ø—Ä–∞–≤–æ –∏ –ø—Ä–∞–≤–æ–ø—Ä–∏–º–µ–Ω–∏—Ç–µ–ª–∏',
                    'm': '–¢–µ–º–∞—Ç–∏–∫–∞ –¥–ª—è –≤—Å–µ–π –Ω–∞—É—á–Ω–æ–π —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∏ —Å —Ä–æ–±–æ—Ç–∞–º–∏ –∏ –∫–æ—Å–º–∏—á–µ—Å–∫–∏–º–∏ –∫–æ—Ä–∞–±–ª—è–º–∏. –ì–∞–Ω–¥–∞–º—ã, –ú–µ—Ç–∞–ª –ì–∏—Ä—ã –∏ –ø—Ä–æ—á–µ–µ.',
                    'ya': '—è–æ–π',
                    'r34': '–ø—Ä–∞–≤–∏–ª–æ 34',
                    'qtr4': 'qtr4',
                    'wow': 'wow, world of warcraft'
                  };
                  return descriptions[boardId] || '';
                },
                
                goBack() {
                  window.location.href = 'index.html';
                },
                
                openThread(threadId) {
                  // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ç—Ä–µ–¥ (–º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ)
                  console.log('–û—Ç–∫—Ä—ã–≤–∞–µ–º —Ç—Ä–µ–¥:', threadId);
                },
                
                retryLoad() {
                  this.loadThreads();
                },
                

                
                formatTimestamp(timestamp) {
                  if (!timestamp) return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
                  
                  const date = new Date(timestamp);
                  if (isNaN(date.getTime())) return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
                  
                  const now = new Date();
                  const diff = now - date;
                  const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                  const hours = Math.floor(diff / (1000 * 60 * 60));
                  const minutes = Math.floor(diff / (1000 * 60));
                  
                  if (days > 0) {
                    return `${days} –¥–Ω. –Ω–∞–∑–∞–¥`;
                  } else if (hours > 0) {
                    return `${hours} —á. –Ω–∞–∑–∞–¥`;
                  } else if (minutes > 0) {
                    return `${minutes} –º–∏–Ω. –Ω–∞–∑–∞–¥`;
                  } else {
                    return '–¢–æ–ª—å–∫–æ —á—Ç–æ';
                  }
                }
              },
              
                             mounted() {
                 this.loadBoardInfo();
                 this.loadThreads();
                 
                 // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∫—Ä–æ–ª–ª–∞ –¥–ª—è –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
                 window.addEventListener('scroll', this.onScroll);
               },
               
               beforeUnmount() {
                 // –£–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∫—Ä–æ–ª–ª–∞
                 window.removeEventListener('scroll', this.onScroll);
               },
              
              template: `
                <div class="board-container">
                  <div class="board-header">
                    <button class="back-button" @click="goBack">‚Üê</button>
                    <div class="board-info">
                      <div class="board-id">/{{ boardInfo?.id }}/</div>
                      <div class="board-name">{{ boardInfo?.name }}</div>
                      <div class="board-description" v-if="boardInfo?.description">{{ boardInfo.description }}</div>
                    </div>
                  </div>
                  
                  <div v-if="loading" class="error-message">
                    <div class="spinner"></div>
                    <div>–ó–∞–≥—Ä—É–∂–∞–µ–º —Ç—Ä–µ–¥—ã...</div>
                  </div>
                  
                  <div v-else-if="error" class="error-message">
                    <div>{{ error }}</div>
                    <button class="retry-button" @click="retryLoad">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
                  </div>
                  
                                                        <div v-else-if="threads.length > 0" class="threads-grid">
                     <div v-for="thread in threads" :key="thread.id" class="thread-card" @click="openThread(thread.id)">
                       <div class="thread-content">
                         <div v-if="thread.image" class="thread-image">
                           <img :src="thread.image" :alt="thread.title" loading="lazy">
                         </div>
                         <div class="thread-info">
                           <div class="thread-header">
                             <div class="thread-title">{{ thread.title }}</div>
                             <div class="thread-meta">
                               <span>–¢—Ä–µ–¥ #{{ thread.id }}</span>
                               <span>{{ formatTimestamp(thread.timestamp) }}</span>
                             </div>
                           </div>
                           <div class="thread-stats">
                             <div class="stat-item">
                               <span>üìù</span>
                               <span>{{ thread.posts }}</span>
                             </div>
                             <div class="thread-views">
                               <span>üëÅÔ∏è</span>
                               <span>{{ thread.views }}</span>
                             </div>
                           </div>
                         </div>
                       </div>
                     </div>
                     
                     <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç—Ä–µ–¥–æ–≤ -->
                     <div v-if="loadingMore" class="loading-more">
                       <div class="spinner small"></div>
                       <span>–ó–∞–≥—Ä—É–∂–∞–µ–º –µ—â–µ —Ç—Ä–µ–¥—ã...</span>
                     </div>
                     
                     <!-- –ö–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ" –µ—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞ -->
                     <div v-if="hasMore && !loadingMore && threads.length > 0" class="load-more-button">
                       <button @click="loadNextPage" class="load-more-btn">
                         –ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ —Ç—Ä–µ–¥—ã
                       </button>
                     </div>
                   </div>
                  
                  <div v-else class="error-message">
                    <div>–¢—Ä–µ–¥—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>
                    <button class="retry-button" @click="retryLoad">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
                  </div>
                </div>
              `
            }).mount('#app');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            appLoading.style.display = 'none';
            vueApp.style.display = 'block';
          } catch (e) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Vue:', e);
          }
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —ç–∫—Ä–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        setTimeout(function() {
          if (window.Telegram && window.Telegram.WebApp) {
            try {
              // –°–æ–æ–±—â–∞–µ–º Telegram —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ
              window.Telegram.WebApp.ready();
              window.Telegram.WebApp.expand();
              
              // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
              document.documentElement.style.height = '100%';
              document.body.style.height = '100%';
            } catch (e) {
              console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram WebApp:', e);
            }
          }
          
          // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏
          setTimeout(function() {
            window.hideLoading();
          }, isIOS ? 1000 : 500);
        }, 100);
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞: —Å–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', function() {
          setTimeout(function() {
            window.hideLoading();
          }, 500);
        });
      });
    </script>
  </body>
</html>
